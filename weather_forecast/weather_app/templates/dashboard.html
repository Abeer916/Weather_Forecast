{% extends 'base.html' %}
{% block title %}Dashboard • WeatherDash{% endblock %}
{% block content %}
	{% if error %}
	<div class="alert alert-danger">{{ error }}</div>
	{% else %}
	<div class="row g-3 mb-3">
		<div class="col-12 col-md-4">
			<div class="card shadow-sm h-100">
				<div class="card-body">
					<div class="d-flex align-items-center">
						<img src="/static/img/sun.svg" width="28" height="28" class="me-2" alt="temp">
						<h6 class="card-title mb-0">Temperature (°C)</h6>
					</div>
					<hr>
					<div class="d-flex justify-content-between">
						<div class="text-muted small">Mean</div>
						<div class="fw-semibold">{{ stats.temperature.mean|default:'—' }}</div>
					</div>
					<div class="d-flex justify-content-between">
						<div class="text-muted small">Min / Max</div>
						<div class="fw-semibold">{{ stats.temperature.min|default:'—' }} / {{ stats.temperature.max|default:'—' }}</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-12 col-md-4">
			<div class="card shadow-sm h-100">
				<div class="card-body">
					<div class="d-flex align-items-center">
						<img src="/static/img/cloud.svg" width="28" height="28" class="me-2" alt="humidity">
						<h6 class="card-title mb-0">Humidity (%)</h6>
					</div>
					<hr>
					<div class="d-flex justify-content-between">
						<div class="text-muted small">Mean</div>
						<div class="fw-semibold">{{ stats.humidity.mean|default:'—' }}</div>
					</div>
					<div class="d-flex justify-content-between">
						<div class="text-muted small">Min / Max</div>
						<div class="fw-semibold">{{ stats.humidity.min|default:'—' }} / {{ stats.humidity.max|default:'—' }}</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-12 col-md-4">
			<div class="card shadow-sm h-100">
				<div class="card-body">
					<div class="d-flex align-items-center">
						<img src="/static/img/rain.svg" width="28" height="28" class="me-2" alt="rain">
						<h6 class="card-title mb-0">Rainfall</h6>
					</div>
					<hr>
					<div class="d-flex justify-content-between">
						<div class="text-muted small">Mean</div>
						<div class="fw-semibold">{{ stats.rainfall.mean|default:'—' }}</div>
					</div>
					<div class="d-flex justify-content-between">
						<div class="text-muted small">Min / Max</div>
						<div class="fw-semibold">{{ stats.rainfall.min|default:'—' }} / {{ stats.rainfall.max|default:'—' }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="row g-3">
		<div class="col-12 col-lg-8">
			<div class="card shadow-sm">
				<div class="card-header d-flex align-items-center justify-content-between">
					<span class="fw-semibold">Temperature Trend</span>
					<a class="btn btn-sm btn-outline-primary" href="/analysis/">See all</a>
				</div>
				<div class="card-body">
					{% if plots.temp_trend %}
					<img src="/static/{{ plots.temp_trend }}" alt="Temperature trend" class="img-fluid rounded">
					{% else %}
					<div class="text-muted">No temperature data available.</div>
					{% endif %}
				</div>
			</div>
		</div>
		<div class="col-12 col-lg-4">
			<div class="card shadow-sm h-100">
				<div class="card-header"><span class="fw-semibold">Avg Monthly Rainfall</span></div>
				<div class="card-body d-flex align-items-center">
					{% if plots.monthly_rain %}
					<img src="/static/{{ plots.monthly_rain }}" alt="Monthly Rainfall" class="img-fluid rounded">
					{% else %}
					<div class="text-muted">No rainfall data available.</div>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
	{% endif %}
{% endblock %}


